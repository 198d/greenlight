<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title># Goals</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Greenlight</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="notes.html"><div class="inner"><span># Goals</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>greenlight</span></div></div></li><li class="depth-2"><a href="greenlight.report.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>report</span></div></a></li><li class="depth-3"><a href="greenlight.report.junit.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>junit</span></div></a></li><li class="depth-2 branch"><a href="greenlight.runner.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>runner</span></div></a></li><li class="depth-2 branch"><a href="greenlight.step.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>step</span></div></a></li><li class="depth-2"><a href="greenlight.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#integration-testing-framework" name="integration-testing-framework"></a>Integration Testing Framework</h1>
<h2><a href="#goals" name="goals"></a>Goals</h2>
<ul>
  <li>Make it easy to write a test harness for a specific service to run in GoCD.</li>
  <li>Test ‘steps’ must be reusable and composable.</li>
  <li>Leverage existing assertion framework in <code>clojure.test</code>?</li>
  <li>Can be used to test multiple services together.</li>
  <li>Ideally, produce a nice report at the end about the runs performed and each  step execution.</li>
</ul>
<h2><a href="#model" name="model"></a>Model</h2>
<p>Integration tests are broken up into high-level ‘runs’ which are an end-to-end validation of a particular use-case or interaction pattern. Runs <em>should</em> always clean up after themselves. (Note: this means additionally recording the necessary context to disk in case the process crashes or is aborted.)</p>
<p>Each run has one or more <em>steps</em>, which are the building blocks of the tests. A given step may be re-used in multiple runs to configure a part of the system a certain way or to validate the behavior of some feature. For example, a common step might be “create a testing tenant”.</p>
<p>Each step takes a <em>component system</em> and a <em>context map</em> as input and returns an updated context map for the next step. Steps should ideally be configurable enough to draw their inputs from different keys in the context map.</p>
<p>The <em>test runner</em> should handle the system setup, invocation of each step in sequence, recording of metrics, final state cleanup, and system shutdown. There should be a <em>clean-only</em> mode which starts the system, loads a context snapshot, and skips to the cleanup phase at the end.</p>
<p>If any step fails, remaining steps should be skipped. Registration of things like metrics and cleanup information should be protected from modification by downstream steps, so some data segregation is needed.</p></div></div></div></body></html>